language: rust
sudo: false
rust:
- nightly
os:
- linux
env:
  global:
  - secure: QD7W0t5J7gfXZP7X1MoGjD18sJOdQTMbiFXOMXBrOUXj8SqhJFynKHwbOBahFN+VekT6Y5i+V+bdjq8EtfYjey0o2PhXRalo+FbTpQQH+Wemdwena+0D5lzyjM8nc2vazPUHMeF96TOZzmnPnvdgYES27F/Np7xI+favW9SP6tAUvRqGp+12f7kwQKSqT2vXsw/RCa90U5rOkfqT6xgDfAa7KYl+Uq6v5ooNToyQkyagGNrcYL4oSPmotVtg1JHiaQuAeKESUZtK73/OGtAymSewjjZj2HGsTHsBuZ+ZzOD9h1UWe1f+IbeF9QFu+Dot4j8ndyl7j8PjCo0IpJD5Xa+lmUQpmsYvopz/M93D/X90ecJWKDGGkvS7wM6SSLOpOFQN2/fjipPx0HEZWgAMN4yl2wiaGdkT7pFrANRbc0cJp9Ux/Mba/3POzU/cJAxwRpnZO5coz5SZJ682FvwjLZXvVxx4E5CeRQ/aBpKBIwIp+2BI1RBWe127bGgpDc3FgmGiogJHFwe/LEw09sTxk4LhApSXm6MiZmmG3g2vJNyypEAvv/S7H8JYKR9BFtMxFw9XHC1TznY1tyVJ8BAGlIcv5DggxqAq39PGGCqqB12hYNzuQ67jdXNZD8G7VSRO9hbAe8ohNBzbdiSTnVw56RqiqmH8CzzafTlg+XaTxPo=
script:
- cargo build --verbose
- cargo build --release --verbose
- cargo test --verbose
- cargo bench --verbose
- cargo doc --verbose
after_success:
- |
  [ $TRAVIS_BRANCH = master ] &&
  [ $TRAVIS_PULL_REQUEST = false ] &&
  echo '<meta http-equiv=refresh content=0;url=sexp/index.html>' > target/doc/index.html &&
  git clone --depth 1 https://github.com/davisp/ghp-import &&
  ./ghp-import/ghp-import -n target/doc &&
  git push -fq https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG}.git gh-pages
